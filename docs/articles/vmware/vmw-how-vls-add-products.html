<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How to add products to the vCloud Usage Meter </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="How to add products to the vCloud Usage Meter ">
    <meta name="generator" content="docfx 2.46.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-margin-left">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="../../index.html">
                  <img id="logo" class="svg" src="../../styles/assets/logo.png" srcset="../../styles/assets/logo@2x.png 2x" width="300" height="49" alt="">
                </a>
              </div>
              <div class="collapse navbar-collapse" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>
        
        <div class="navbar-borderless subnav navbar navbar-default">
          <div class="navbar-right subnav-margin-right">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UKCloud/documentation/blob/master/articles/vmware/vmw-how-vls-add-products.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
          </div>
          <div class="hide-when-search subnav-margin-left" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-10">
                <article class="content wrap" id="_content" data-uid="">
                  
<h1 id="how-to-add-products-to-the-vcloud-usage-meter">How to add products to the vCloud Usage Meter</h1>

<h2 id="overview">Overview</h2>
<p>The VMware Licence Service (VLS) enables you to switch to a flexible, VMware Cloud Provider Programme (VCPP) consumption-based licensing model.</p>
<p>As the VLS licensing model is consumption-based, you must send reports to UKCloud each month to detail your usage of VMware products. To generate these monthly reports, you need to install the vCloud Usage Meter (Usage Meter) and give it access to the products that you need it to report on.</p>
<p>This article provides all the information you need to add products to the Usage Meter. For more information about the Usage Meter, see the VMware documentation <a href="https://docs.vmware.com/en/vCloud-Usage-Meter/3.6/com.vmware.vcum.usersguide.doc/GUID-AE1277B2-6B5A-4CAE-832A-DF89C1BD71DC.html">here</a>.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You must have installed and configured the vCloud Usage Meter. For more information, see <a href="vmw-how-vls-install-usage-meter.html"><em>How to install the vCloud Usage Meter</em></a>.</p>
<h2 id="adding-products-to-the-usage-meter">Adding products to the Usage Meter</h2>
<p>To collect VMware product usage information for your UKCloud environment, you must add each product that you want to be monitored to the Usage Meter. For each product server that you add, the Usage Meter might present a certificate that you can verify, which you'll need to accept before proceeding.</p>
<p>The instructions below show how to enable monitoring for some of the base VMware products. For instructions for additional products, see the VMware documentation <a href="https://docs.vmware.com/en/vCloud-Usage-Meter/3.6/com.vmware.vcum.usersguide.doc/GUID-DDB3AC30-C62E-496D-A543-5FFF6B881B10.html">here</a>.</p>
<h3 id="adding-a-vcenter-server-to-the-usage-meter">Adding a vCenter Server to the Usage Meter</h3>
<p>You can add one or more vCenter Server instances to the Usage Meter.</p>
<h4 id="creating-a-role-for-the-usage-meter">Creating a role for the Usage Meter</h4>
<p>Before you can add a vCenter Server to the Usage Meter, you need to create a new role with the correct read only permission:</p>
<ol>
<li><p>In vCenter, navigate to <strong>Administration &gt; Roles</strong>, then click the <strong>Create role</strong> button.</p>
</li>
<li><p>Enter <strong>Role name</strong>, for example, <code>usagemeter_RO</code>.</p>
</li>
<li><p>Select the <strong>Profile-driven storage &gt; Profile-driven storage view</strong> permission and click <strong>OK</strong>.</p>
</li>
<li><p>Navigate to <strong>Administration &gt; Users and Groups</strong>.</p>
</li>
<li><p>Create a new local user, for example, <code>usagemeter</code> and record the password.</p>
</li>
<li><p>Navigate to <strong>Hosts and Clusters</strong> and select the root server object.</p>
</li>
<li><p>Select <strong>Permissions</strong> and click the <strong>Add</strong> button.</p>
</li>
<li><p>Enter the user and role created in these steps and select <strong>Propagate to children</strong>, then click <strong>OK</strong>.</p>
</li>
</ol>
<h4 id="adding-a-vcenter-server">Adding a vCenter Server</h4>
<p>To monitor vCenter Servers using the Usage Meter, verify that you have the host name and credentials for the vCenter Server you're adding.</p>
<div class="NOTE">
<h5>Note</h5>
<p>If you're using VMware Site Recovery Manager (SRM), add the recovery site vCenter before adding the protected site vCenter. The Usage Meter performs collections against all added vCenter Server instances and SRM instances in both the protected and recovery sites.</p>
</div>
<p>To add a vCenter Server to the Usage Meter:</p>
<ol>
<li><p>Log in to the Usage Meter web application.</p>
</li>
<li><p>In the top-right menu, select <strong>Manage</strong>, then select the <strong>Products</strong> tab.</p>
</li>
<li><p>In the <em>vCenter Server</em> section, click the <strong>Add</strong> button.</p>
</li>
<li><p>In the <em>vCenter Server</em> dialog box, if you're using an external Platform Services Controller (PSC), select the <strong>External Platform Services Controller</strong> check box and enter the external PSC host name and port (the default port for PSC is <code>7444</code>).</p>
</li>
<li><p>In the <strong>vCenter Server hostname</strong> field, enter a host name or IP address of the vCenter Server.</p>
</li>
<li><p>In the <strong>Administrator User Name</strong> field, enter the Usage Meter user created above.</p>
</li>
<li><p>In the <strong>Password</strong> field, enter the password for the Usage Meter user.</p>
</li>
<li><p>Select the <strong>Meter</strong> check box.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Do not select <strong>Meter</strong> if this site is a recovery site vCenter Server instance.</p>
</div>
</li>
<li><p>If you're using VMware SRM and this vCenter Server is a protected site instance, from the <strong>Site Recovery Manager Peer vCenter Server</strong> list, select the corresponding recovery site instance.</p>
</li>
<li><p>Click <strong>Save</strong>.</p>
</li>
</ol>
<p>After you accept any required certificates, the vCenter Server instance is added to the list of vCenter Server instances. If an error occurs, you'll see a message and the server instance will not be added.</p>
<h3 id="adding-nsx-v-manager-to-the-usage-meter">Adding NSX-V Manager to the Usage Meter</h3>
<p>To monitor NSX-V Managers using the Usage Meter, verify that you have the NSX CLI Admin user name and password for the NSX Manager you're adding.</p>
<p>To add NSX Manager to the Usage Meter:</p>
<ol>
<li><p>In the top-right menu of the Usage Meter web application, select <strong>Manage</strong>, then select the <strong>Products</strong> tab.</p>
</li>
<li><p>In the <em>NSX Manager</em> section, click <strong>Add</strong>.</p>
</li>
<li><p>In the <strong>Host Name or IP</strong> field, enter the host name or IP address of the NSX Manager.</p>
</li>
<li><p>In the <strong>User Name</strong> field, enter the NSX CLI Admin user name.</p>
</li>
<li><p>In the <strong>Password</strong> field, enter the NSX CLI Admin password.</p>
</li>
<li><p>In the <strong>vCenter Host Name or IP</strong> field, enter the referencing vCenter Server host name or IP address.</p>
</li>
<li><p>Click <strong>Save</strong>.</p>
</li>
</ol>
<p>After you accept any required certificates, the NSX Manager instance is added to the list of NSX Manager instances. If an error occurs, you'll see a message and the server instance will not be added.</p>
<div class="NOTE">
<h5>Note</h5>
<p>After successfully adding the NSX Manager instance, if you enter an incorrect password when editing it, the NSX Manager will be deleted. To reactivate it, provide the correct credentials.</p>
</div>
<h3 id="adding-vrealize-operations-manager-to-the-usage-meter">Adding vRealize Operations Manager to the Usage Meter</h3>
<p>To monitor vRealize Operations Manager (vROps) instances using the Usage Meter, vROps has to be registered correctly against a vCenter Server. During discovery of a vCenter Server, the Usage Meter will populate a vROps entry. To complete the vROps registration and begin metering, you need to provide the required credentials for each vROps instance you meter.</p>
<div class="NOTE">
<h5>Note</h5>
<p>To prevent metering issues with vROps, ensure vROps, vCenter and the Usage Meter are all using the same time zone.</p>
</div>
<p>To complete vROps registration:</p>
<ol>
<li><p>In the top-right menu of the Usage Meter web application, select <strong>Manage</strong>, then select the <strong>Products</strong> tab.</p>
</li>
<li><p>In the <em>vRealize Operations Manager</em> section, click <strong>Edit</strong> and enter the user name and password.</p>
<ul>
<li><p>If you're logging in with a local user, use the local <code>user-name</code>.</p>
</li>
<li><p>If you're logging in with a non-local user, the user name must be in the following format: <code>user-name@domain-name@domain-alias</code>, where the <code>domain-alias</code> is the domain short name or domain alias.</p>
</li>
</ul>
</li>
<li><p>To add vRealize Operations Manager, accept the certificate. If you miss accepting the certificate, delete the vCenter Server associated with that vRealize Operations Manager and then reactivate it.</p>
</li>
<li><p>Click <strong>Save</strong>.</p>
</li>
</ol>
<h2 id="checking-the-monitoring-status">Checking the monitoring status</h2>
<p>When you've finished adding all of your metered products and the collection time has been reached, you can check the monitoring status to ensure that the Usage Meter is monitoring products correctly.</p>
<ol>
<li><p>In the top-right menu of the Usage Meter web application, select <strong>Monitor</strong>.</p>
</li>
<li><p>Against each day, you can see the times of successful and failed collections.</p>
</li>
<li><p>If collections are failing, hover the mouse over the failure times to display which product is failing collections.</p>
</li>
<li><p>If you're unable to diagnose the cause of the failures, you can use the Support option from the menu bar to generate a log bundle and then raise a ticket in <a href="https://portal.skyscapecloud.com/support/ivanti">My Calls</a> and attach the log for investigation.</p>
</li>
</ol>
<h2 id="setting-licence-packs">Setting licence packs</h2>
<p>When you've completed the addition of VMware products to the Usage Meter and it has done a discovery of the environment, you need to configure the discovered licences to the correct billing category.</p>
<ol>
<li><p>In the top-right menu of the Usage Meter web application, select <strong>Licenses</strong>.</p>
</li>
<li><p>On the <em>Billing Categories</em> tab, against each discovered licence, from the <strong>Billing Category</strong> list, select <strong>VCPP</strong>.</p>
</li>
</ol>
<h2 id="next-steps">Next steps</h2>
<p>This article described how to give the Usage Meter access to the products that you need it to report on. Next, you need to send monthly usage reports to UKCloud so that you can be billed correctly for the VMware Licence Service.</p>
<ul>
<li><a href="vmw-how-vls-report-usage.html"><em>How to report licence usage for the VMware Licence Service</em></a></li>
</ul>
<h2 id="feedback">Feedback</h2>
<p>If you find a problem with this article, click <strong>Improve this Doc</strong> to make the change yourself or raise an <a href="https://github.com/UKCloud/documentation/issues">issue</a> in GitHub. If you have an idea for how we could improve any of our services, send an email to <a href="mailto:feedback@ukcloud.com">feedback@ukcloud.com</a>.</p>


                  <div class="row">
                  </div>
                </article>
              </div>
              
              <div class="hidden-sm col-md-2" role="complementary">
                <div class="sideaffix">
                  <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                  <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right text-right">
              Generated by <strong>DocFX</strong><br>
              <a href="#top">Back to top</a>
            </span>
            <span>&copy <a href="https://ukcloud.com">UKCloud Ltd</a>, 2020. All Rights Reserved.<br><a href="https://ukcloud.com/legal">Privacy Policy. </a><a href="https://ukcloud.com/terms-and-conditions">Terms of Use. </a><a href="https://docs.ukcloud.com/articles/other/other-how-contribute-knowledge.html">Contribute. </a></span>
          </div>
        </div>
      </footer>
      
      <div id="cookie-cta" style="display: none;" aria-hidden="true">
        <div class="cookie-cta-inner container">
          <div class="cookie-cta-text">
            <p>
              The <strong>UKCloud Knowledge Centre</strong> uses cookies to ensure that we give you the best experience on our website. If you continue we assume that you consent to receive all cookies on this website.
            </p>
          </div>
      
          <div class="cookie-cta-action">
            <button class="cookie-cta-close button button--small">Accept</button>
          </div>
        </div>
      </div>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="../../styles/highlight.js"></script>
    <!-- Enable Terraform syntax highlighting -->
    <script type="text/javascript" src="../../styles/terraform.js"></script>
    <script type="text/javascript">
      hljs.registerLanguage('terraform', window.hljsDefineTerraform);
      hljs.initHighlightingOnLoad();
    </script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-57433193-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-57433193-6');
    </script>
  </body>
</html>
